<!DOCTYPE html>
<html>
	<head>
			<title>Model to Maps</title>
			<meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
		
	    <script src="https://www.google.com/jsapi"></script>
			<script src="../libs/js/head.js"></script>

			<script type="text/javascript">
			      window.main_stuff = {}
		  </script>
			
			<script type="text/javascript">
	      head.js("js/main.js");
	    </script>
			<script type="text/javascript" src="js/load_map.js"></script>
			
			 <script type="text/javascript">	
		      google.load("maps", "3", {
		        other_params: "libraries=geometry,drawing&sensor=false",
		      });
	    </script>
	    <script type="text/javascript">
	      google.maps.event.addDomListener(window, 'load', window.main_stuff.init);
	    </script>
	    <script src="../libs/js/ContextMenu.js"></script>	    
			<link href="../libs/js/bootstrap/css/bootstrap.css" rel="stylesheet">
	
	   	<style type="text/css">
	      html { height: 100% }
	      body { height: 100%; margin: 5px; padding: 0 }
	      #map_canvas { height: 65%; width:100%; }
				#map_canvas img { max-width:none; }
		  	#scenario_text { width: 30%; height: 200px;}
		  	#header {width:100%}
				.navbar {margin-bottom: 0px}
				.container {position:absolute; z-index:1;width: 278px; margin-top:5px;margin-left:80px; background-color: #444444;}

				.ui-dialog {
					background-color: #fff;
					border-color: #ccc;
					border-color: rgba(0, 0, 0, 0.2);
					border-style: solid;
					border-width: 1px;
					-webkit-border-radius: 5px;
					-moz-border-radius: 5px;
					border-radius: 5px;
				}
				
				.context_menu {
					background-color: #fff;
					min-width: 160px;
					max-width: 220px;
					_width: 160px;
					padding: 4px 0;
					margin: 0;
					list-style: none;
					border-color: #ccc;
					border-color: rgba(0, 0, 0, 0.2);
					border-style: solid;
					border-width: 1px;
					-webkit-border-radius: 5px;
					-moz-border-radius: 5px;
					border-radius: 5px;
					-webkit-box-shadow: 0 5px 10px rgba(0, 0, 0, 0.2);
					-moz-box-shadow: 0 5px 10px rgba(0, 0, 0, 0.2);
					box-shadow: 0 5px 10px rgba(0, 0, 0, 0.2);
					-webkit-background-clip: padding-box;
					-moz-background-clip: padding;
					background-clip: padding-box;
					*border-right-width: 2px;
					*border-bottom-width: 2px;
				}
				.context_menu_item {
					display: block;
					padding: 3px 15px;
					clear: both;
					font-weight: normal;
					line-height: 18px;
					color: #555555;
					white-space: nowrap;
				}
				.context_menu_separator {
					height: 1px;
					margin: 5px 1px;
					overflow: hidden;
					background-color: #e5e5e5;
					border-bottom: 1px solid #ffffff;
					*width: 100%;
					*margin: -5px 0 5px;
				}
				.context_menu_item:hover {
					color: #ffffff;
					text-decoration: none;
					background-color: #0088cc;
				}
				hr {
					margin:0;
					padding:0 0 2px 0;
				}

	    </style>
			
			<script type="text/javascript">
				$(function() {
					$('.jdialog').dialog({
						autoOpen: false,
						show: {effect:'drop', direction: 'left', duration: 200},
						hide: {effect:'drop', direction: 'right', duration: 200}
					});
					$('.ui-dialog-titlebar-close').ready(function() {
						var titlebar = $('.ui-dialog-titlebar-close');
						for(var i = 0; i < titlebar.length; i++) {
							titlebar[i].innerHTML = '<i class="icon-remove"></i>';
						}
					});
					$('ul > li > a.jmodal').click(function() {
						var navId = this.id;
						switch(navId) {
							case 'nb':
								$('#nodebrowser').dialog('open')
								return true;
							case 'lb':
								$('#linkbrowser').dialog('open')
								return true;
							case 'pb':
								$('#pathbrowser').dialog('open')
								return true;
							case 'eb':
								$('#eventbrowser').dialog('open')
								return true;
							case 'cb':
								$('#controlbrowser').dialog('open')
								return true;
							case 'sb':
								$('#sensorbrowser').dialog('open')
								return true;
							case 'np':
								$('#netprop').dialog('open')
								return true;
							default:
								return true;
						}
					});
				});
			
				$(function() {
					$('#upload').click(function(e) {
						$('#uploadField').click();
						e.preventDefault();
					});
				});
				
			</script>
			
	</head>
	<body>
			<!--navbar -->
			<div class="navbar">
			    <div class="container navbar-inner">
			      <ul class="nav">
						  <li class="dropdown active" id="menu1">
							    <a class="dropdown-toggle" data-toggle="dropdown" href="#menu1">
							      File
							      <b class="caret"></b>
							    </a>
							    <ul class="dropdown-menu">
							      <li><a href="#">New</a></li>
										<li class="divider"></li>
										<input type="file" name="localNetwork" style="visibility:hidden; position:absolute" id="uploadField" />
										<li><a href="" id="upload">Open Local Network</a></li>
							      <li><a href="#">Save Local Network</a></li>
							      <li class="divider"></li>
							      <li><a href="#">Import Local Network</a></li>
							    </ul>
							  </li>
							  <li class="dropdown active" id="windows">
							    <a class="dropdown-toggle" data-toggle="dropdown" href="#windows">
							      Windows
							      <b class="caret"></b>
							    </a>
							    <ul class="dropdown-menu">
							      <li><a id="nb" class="jmodal">Node Browser</a></li>
										<li><a id="lb" class="jmodal">Link Browser</a></li>
							      <li><a id="pb" class="jmodal">Path Browser</a></li>
										<li><a id="eb" class="jmodal">Event Browser</a></li>
							      <li><a id="cb" class="jmodal">Controller Browser</a></li>
										<li><a id="sb" class="jmodal">Sensor Browser</a></li>
							      <li><a id="np" class="jmodal">Network Properties</a></li>

							      <li><a href="#">Map</a></li>
							      <li class="divider"></li>
							      <li><a href="#">Cascade</a></li>
							      <li><a href="#">Tile</a></li>
							      <li><a href="#">Tile + Fill Space</a></li>
							      <li><a href="#">Show All</a></li>
							    </ul>
							  </li>
							  <li class="dropdown active" id="tools">
							    <a class="dropdown-toggle" data-toggle="dropdown" href="#tools">
							      Tools
							      <b class="caret"></b>
							    </a>
							    <ul class="dropdown-menu">
							      <li><a href="#">Import PeMS data</a></li>
										<li><a href="#">Calibrate</a></li>
							      <li><a href="#">Simulate</a></li>
							    </ul>
							  </li>
							  <li class="dropdown active" id="help">
							    <a class="dropdown-toggle" data-toggle="dropdown" href="#help">
							      Help
							      <b class="caret"></b>
							    </a>
							    <ul class="dropdown-menu">
							      <li><a data-toggle="modal" href="#about">About</a></li>
										<li><a data-toggle="modal" href="#helpinfo">Help</a></li>
										<li><a data-toggle="modal" href="#version">Version</a></li>
							      <li><a data-toggle="modal" href="#identity">Identity</a></li>
										<li><a data-toggle="modal" href="#contact">Contact</a></li>
							      <li><a data-toggle="modal" href="#legal">Legal</a></li>
							    </ul>
							  </li>
						</ul>
			    </div>
			</div>
			
		<!-- Menu Modals -->

		<div id="nodebrowser" class="modal hide fade">
			<div class="modal-header">
				<button class="close" data-dismiss="modal">&times;</button>
				<h3>Node Browser</h3>
			</div>
			<div class="modal-body">
				<div class="row-fluid">
					<div class="span6">
						<table id="nodename">
						</table>
					</div>
					<div class="span6">...</div>
				</div>
			</div>
			<div class="modal-footer">
				<a href="#" class="btn" data-dismiss="modal" >Close</a>
			</div>
		</div>
		
		<div id="linkbrowser" class="modal hide fade">
			<div class="modal-header">
				<button class="close" data-dismiss="modal">&times;</button>
				<h3>Link Browser</h3>
			</div>
			<div class="modal-body">
				<div class="row-fluid">
					<div class="span6">
					</div>
					<div class="span6">...</div>
				</div>
			</div>
			<div class="modal-footer">
				<a href="#" class="btn" data-dismiss="modal" >Close</a>
			</div>
		</div>
		
		<div id="pathbrowser" class="modal hide fade">
			<div class="modal-header">
				<button class="close" data-dismiss="modal">&times;</button>
				<h3>Path Browser</h3>
			</div>
			<div class="modal-body">
				<div class="row-fluid">
					<div class="span6">
					</div>
					<div class="span6">...</div>
				</div>
			</div>
			<div class="modal-footer">
				<a href="#" class="btn" data-dismiss="modal" >Close</a>
			</div>
		</div>
		
		<div id="eventbrowser" class="modal hide fade">
			<div class="modal-header">
				<button class="close" data-dismiss="modal">&times;</button>
				<h3>Event Browser</h3>
			</div>
			<div class="modal-body">
				<div class="row-fluid">
					<div class="span6">
					</div>
					<div class="span6">...</div>
				</div>
			</div>
			<div class="modal-footer">
				<a href="#" class="btn" data-dismiss="modal" >Close</a>
			</div>
		</div>
		
		<div id="controlbrowser" class="modal hide fade">
			<div class="modal-header">
				<button class="close" data-dismiss="modal">&times;</button>
				<h3>Controller Browser</h3>
			</div>
			<div class="modal-body">
				<div class="row-fluid">
					<div class="span6">
					</div>
					<div class="span6">...</div>
				</div>
			</div>
			<div class="modal-footer">
				<a href="#" class="btn" data-dismiss="modal" >Close</a>
			</div>
		</div>
		
		<div id="sensorbrowser" class="modal hide fade">
			<div class="modal-header">
				<button class="close" data-dismiss="modal">&times;</button>
				<h3>Sensor Browser</h3>
			</div>
			<div class="modal-body">
				<div class="row-fluid">
					<div class="span6">
					</div>
					<div class="span6">...</div>
				</div>
			</div>
			<div class="modal-footer">
				<a href="#" class="btn" data-dismiss="modal" >Close</a>
			</div>
		</div>
		
		<div id="netprop" class="modal hide fade">
			<div class="modal-header">
				<button class="close" data-dismiss="modal">&times;</button>
				<h3>Network Properties</h3>
			</div>
			<div class="modal-body">
				<div class="row-fluid">
					<div class="span6">
					</div>
					<div class="span6">...</div>
				</div>
			</div>
			<div class="modal-footer">
				<a href="#" class="btn" data-dismiss="modal" >Close</a>
			</div>
		</div>
		
		<!-- Help toolbar -->
		<div id="about" class="modal hide fade">
			<div class="modal-header">
				<button class="close" data-dismiss="modal">&times;</button>
				<h3>About</h3>
			</div>
			<div class="modal-body">
				<div class="row-fluid">
					<div class="span6">
					</div>
					<div class="span6">...</div>
				</div>
			</div>
			<div class="modal-footer">
				<a href="#" class="btn" data-dismiss="modal" >Close</a>
			</div>
		</div>
		
		<div id="helpinfo" class="modal hide fade">
			<div class="modal-header">
				<button class="close" data-dismiss="modal">&times;</button>
				<h3>Help</h3>
			</div>
			<div class="modal-body">
				<div class="row-fluid">
					<div class="span6">
					</div>
					<div class="span6">...</div>
				</div>
			</div>
			<div class="modal-footer">
				<a href="#" class="btn" data-dismiss="modal" >Close</a>
			</div>
		</div>
		
		<div id="version" class="modal hide fade">
			<div class="modal-header">
				<button class="close" data-dismiss="modal">&times;</button>
				<h3>Version</h3>
			</div>
			<div class="modal-body">
				<div class="row-fluid">
					<div class="span6">
					</div>
					<div class="span6">...</div>
				</div>
			</div>
			<div class="modal-footer">
				<a href="#" class="btn" data-dismiss="modal" >Close</a>
			</div>
		</div>
		
		<div id="identity" class="modal hide fade">
			<div class="modal-header">
				<button class="close" data-dismiss="modal">&times;</button>
				<h3>Identity</h3>
			</div>
			<div class="modal-body">
				<div class="row-fluid">
					<div class="span6">
					</div>
					<div class="span6">...</div>
				</div>
			</div>
			<div class="modal-footer">
				<a href="#" class="btn" data-dismiss="modal" >Close</a>
			</div>
		</div>
		
		<div id="contact" class="modal hide fade">
			<div class="modal-header">
				<button class="close" data-dismiss="modal">&times;</button>
				<h3>Contact</h3>
			</div>
			<div class="modal-body">
				<div class="row-fluid">
					<div class="span6">
					</div>
					<div class="span6">...</div>
				</div>
			</div>
			<div class="modal-footer">
				<a href="#" class="btn" data-dismiss="modal" >Close</a>
			</div>
		</div>
		
		<div id="legal" class="modal hide fade">
			<div class="modal-header">
				<button class="close" data-dismiss="modal">&times;</button>
				<h3>Legal</h3>
			</div>
			<div class="modal-body">
				<div class="row-fluid">
					<div class="span6">
					</div>
					<div class="span6">...</div>
				</div>
			</div>
			<div class="modal-footer">
				<a href="#" class="btn" data-dismiss="modal" >Close</a>
			</div>
		</div>
		
		<!-- end modals -->
	
  	<div id="map_canvas">
  	</div>
	<div id="scenario_import">
  		<h2>Load scenario</h2>
  		<textarea  id="scenario_text"><?xml version="1.0" encoding="UTF-8"?>
			<scenario id="null" name="null" schemaVersion="1.0.20" xmlns:aurora="http://path.berkeley.edu/aurora">
			  <network name="New Network" ml_control="false" q_control="false" dt="300" id="-1">
			    <description>Created by Network Editor version xsd-1.0.20-55-g89efc8a</description>
			    <position>
			      <point lat="37.85794730789898" lng="-122.29954719543457"/>
			    </position>
			    <MonitorList/>
			    <NetworkList/>
			    <NodeList>
			      <node name="Node -1" type="F" id="-1">
			        <outputs>
			          <output link_id="-1"/>
			        </outputs>
			        <inputs>
			          <input link_id="-2">
			            <weavingfactors>1</weavingfactors>
			          </input>
			        </inputs>
			        <position>
			          <point lat="37.85298358928589" lng="-122.29984760284424"/>
			        </position>
			      </node>
			      <node name="Node -2" type="F" id="-2">
			        <outputs>
			          <output link_id="-3"/>
			        </outputs>
			        <inputs>
			          <input link_id="-1">
			            <weavingfactors>1</weavingfactors>
			          </input>
			        </inputs>
			        <position>
			          <point lat="37.86213208939834" lng="-122.30229377746582"/>
			        </position>
			      </node>
			      <node name="Node -3" type="T" id="-3">
			        <outputs/>
			        <inputs/>
			        <position>
			          <point lat="37.84960343952525" lng="-122.29463338851927"/>
			        </position>
			      </node>
			      <node name="Node -4" type="T" id="-4">
			        <outputs/>
			        <inputs/>
			        <position>
			          <point lat="37.86707011338645" lng="-122.30141401290894"/>
			        </position>
			      </node>
			    </NodeList>
			    <LinkList>
			      <link name="-1 -> -2" road_name="I-80 E" lanes="4" length="0.6467014200850675" type="FW" id="-1">
			        <description></description>
			        <begin node_id="-1"/>
			        <end node_id="-2"/>
			        <fd densityCritical="30.0" flowMax="1800.0" densityJam="150.0"/>
			        <dynamics type="CTM"/>
			        <qmax>100</qmax>
			      </link>
			      <link name="orig -> -1" road_name="null" lanes="4" length="0.497429321374626" type="FW" id="-2">
			        <description></description>
			        <begin node_id="-3"/>
			        <end node_id="-1"/>
			        <fd densityCritical="30.0" flowMax="1800.0" densityJam="150.0"/>
			        <dynamics type="CTM"/>
			        <qmax>100</qmax>
			      </link>
			      <link name="-2 -> dest" road_name="I-80 E" lanes="4" length="0.407584763608256" type="FW" id="-3">
			        <description></description>
			        <begin node_id="-2"/>
			        <end node_id="-4"/>
			        <fd densityCritical="30.0" flowMax="1800.0" densityJam="150.0"/>
			        <dynamics type="CTM"/>
			        <qmax>100</qmax>
			      </link>
			    </LinkList>
			    <SignalList/>
			    <ODList/>
			    <SensorList>
			      <sensor id="-1" type="loop" link_type="FW">
			        <description>University Ave</description>
			        <position>
			          <point lat="37.856225" lng="-122.300735"/>
			        </position>
			        <display_position>
			          <point lat="37.85624448326665" lng="-122.30057621322634"/>
			        </display_position>
			        <links>-1</links>
			        <parameters>
			          <parameter name="length" value="0.38"/>
			          <parameter name="start_time" value="0"/>
			          <parameter name="hwy_dir" value="E"/>
			          <parameter name="offset_in_link" value="0"/>
			          <parameter name="postmile" value="10.4"/>
			          <parameter name="vds" value="400679"/>
			          <parameter name="lanes" value="5"/>
			          <parameter name="hwy_name" value="80"/>
			          <parameter name="data_id" value="400679"/>
			        </parameters>
			        <data_sources>
			          <source url="pems:d4, Jan 1, 2011" dt="300" format="PeMS Data Clearinghouse"/>
			        </data_sources>
			      </sensor>
			    </SensorList>
			    <DirectionsCache>
			      <DirectionsCacheEntry avoidHighways="false" road_name="I-80 E">
			        <From>
			          <ALatLng lat="37.85298358928589" lng="-122.29984760284424"/>
			        </From>
			        <To>
			          <ALatLng lat="37.86213208939834" lng="-122.30229377746582"/>
			        </To>
			        <EncodedPolyline zoomFactor="2" numLevels="18">
			          <Points>gd`fFntmiVax@|N</Points>
			          <Levels>PP</Levels>
			        </EncodedPolyline>
			      </DirectionsCacheEntry>
			      <DirectionsCacheEntry avoidHighways="false" road_name="null">
			        <From>
			          <ALatLng lat="37.84960343952525" lng="-122.29463338851927"/>
			        </From>
			        <To>
			          <ALatLng lat="37.85298358928589" lng="-122.29984760284424"/>
			        </To>
			        <EncodedPolyline zoomFactor="2" numLevels="18">
			          <Points>{n_fFntliVfClIZxBOdBc@jBq@pAuAlAgEp@{DhAoGhA</Points>
			          <Levels>PADABFCAAP</Levels>
			        </EncodedPolyline>
			      </DirectionsCacheEntry>
			      <DirectionsCacheEntry avoidHighways="false" road_name="I-80 E">
			        <From>
			          <ALatLng lat="37.86213208939834" lng="-122.30229377746582"/>
			        </From>
			        <To>
			          <ALatLng lat="37.86707011338645" lng="-122.30141401290894"/>
			        </To>
			        <EncodedPolyline zoomFactor="2" numLevels="18">
			          <Points>i}afFldniVeLtBUIcADeD\iD?w@Si@u@w@qF</Points>
			          <Levels>PCAABFBCP</Levels>
			        </EncodedPolyline>
			      </DirectionsCacheEntry>
			    </DirectionsCache>
			  </network>
			  <settings>
			    <units>US</units>
			  </settings>
			  <InitialDensityProfile/>
			  <SplitRatioProfileSet>
			    <splitratios node_id="-1" dt="300"/>
			    <splitratios node_id="-2" dt="300"/>
			    <splitratios node_id="-3" dt="300"/>
			    <splitratios node_id="-4" dt="300"/>
			  </SplitRatioProfileSet>
			  <CapacityProfileSet>
			    <capacity link_id="-1" dt="1"></capacity>
			  </CapacityProfileSet>
			  <EventSet/>
			  <DemandProfileSet>
			    <demand knob="1" dt="1" link_id="-1"></demand>
			  </DemandProfileSet>
			  <ControllerSet/>
			</scenario></textarea>
  		<br />
  		<button id="load_scenario" class="btn btn-primary">Load XML into window.textarea_scenario</button>
	</div>
	</body>
</html>
